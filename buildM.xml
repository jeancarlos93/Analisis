<?xml version="1.0"?>
<project name="MyApplication" default="build">
  <target name="clean">
    <delete dir="build/reports"/>
  </target>
  <target name="prepare">
    <mkdir dir="build/reports/logs"/>
  </target> 
  
  <!-- <exec dir="C:/xampp/php" executable="phpunit" failonerror="true" description="Run unit tests with PHPUnit"> 
<exec dir="C:/xampp/php" executable="cmd" failonerror="true"> 
-->
  <target name="phpunits">
    <exec dir="C:/xampp/php" executable="phpunit.bat" failonerror="true" description="Run unit tests with PHPUnit"> </exec>
    <phpunit printsummary="true" haltonfailure="true" >
      <formatter todir="build/reports/logs" type="xml"/>
      <batchtest>
        <fileset dir=".">
          <include name="TddTests.class.php"/>
        </fileset>
      </batchtest>
      <formatter type="xml" todir="build/reports" outfile="logfile.xml"/>
   </phpunit>
   <phpunitreport infile="build/reports/logfile.xml"
                  todir="build/reports"/>
  </target>
  <target name="build" depends="clean,prepare,phpunits"/>
</project>
